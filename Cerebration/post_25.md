# 三思系列 | 如何让一个列表页面的代码越来越少，越来越优雅

本文以一个真实的项目案例，描述了我们在不同阶段如何一步一步将列表页面越写越优雅的。

本文将逐渐展开每种做法下，我们遇到的问题和改进方案，展开三个维度的思考。

## 案例简介

笔者在前几年和一群小伙伴一起维护 `哈罗摩托` 这一应用，其中包含了大量的 `资讯`，`社交` 类内容，显然：
我们存在着大量场景需要利用 `列表` 做信息呈现。而有相当多的列表 `极其复杂` ，可表现为：

* 非单一数据来源 （*多个后台接口调用*）
* 表现形式多样
* 交互形式多样 （*如折叠、吸顶*）

相信大家对解决这些问题都有自己的心得，笔者先结合三个页面给出直观的感受：

![demo1](./post_25/demo1.png)
![demo1](./post_25/demo2.png)
![demo1](./post_25/demo3.png)

* 第一张图-内容流，显然这是一个列表页面 ， `热门摩友圈` 是内嵌的一组推荐数据，是一个横滑列表
* 第二张图-商城，显然这也需要一个列表，顶部的品牌和商品内容 **确实** 来自两个接口
* 第三张图-动态详情页，选取了较短的一篇，其 `正文` 和 `评论` **确实**来自两个接口

## 和读者先做一波互动

相信这几个例子并不难理解，读者们应该都有自己的实现方案思路了。

我们先敲定一点：控件使用RecyclerView。就以下几个方面，请各位读者在心里再推演一下整个方案，构建业务模型：

* Adapter的使用 *无须思考太多，可以用你最习惯的框架*
* 数据源模型
* 数据获取&更新页面 *无须思考太多，何时触发请求，成功、失败如何处理即可*


方案先记在心里吧，我们继续。

## 力大砖飞阶段

*这是最开始的阶段，项目基础建设也比较薄弱*

以第三张图为例。








